import"./style.css";import*as THREE from"three";import{EffectComposer}from"three/examples/jsm/postprocessing/EffectComposer.js";import{RenderPass}from"three/examples/jsm/postprocessing/RenderPass.js";import{FBXLoader}from"three/examples/jsm/loaders/FBXLoader";var scrollPercent=0,animating=!0;const HOME_ELEMENT=document.querySelector("#homeButton"),SKILLS_ELEMENT=document.querySelector("#skillsButton"),CONTACTS_ELEMENT=document.querySelector("#contactsButton"),CHECK_ELEMENT=document.querySelector("#checkbox");function getScrollPercent(){var e=document.documentElement,t=document.body,o="scrollTop",r="scrollHeight";return(e[o]||t[o])/((e[r]||t[r])-e.clientHeight)*100}function getMidpointPixels(){var e=document.documentElement,t=document.body,o="scrollHeight";return(e[o]||t[o])/3}document.addEventListener("scroll",(e=>{scrollPercent=getScrollPercent().toFixed(2)})),HOME_ELEMENT.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})})),SKILLS_ELEMENT.addEventListener("click",(()=>{window.scrollTo({top:getMidpointPixels(),behavior:"smooth"})})),CONTACTS_ELEMENT.addEventListener("click",(()=>{window.scrollTo({top:9999999,behavior:"smooth"})})),CHECK_ELEMENT.addEventListener("click",(()=>{animating=!animating}));const scene=new THREE.Scene;scene.background=null;const sizes={width:window.innerWidth,height:window.innerHeight},camera=new THREE.PerspectiveCamera(75,sizes.width/sizes.height,.1,100);camera.position.x=.8,camera.position.y=.8,camera.position.z=.8,scene.add(camera),window.addEventListener("resize",(()=>{sizes.width=window.innerWidth,sizes.height=window.innerHeight,camera.aspect=sizes.width/sizes.height,camera.updateProjectionMatrix(),renderer.setSize(sizes.width,sizes.height),renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))}));const canvas=document.querySelector("#webgl"),renderer=new THREE.WebGLRenderer({canvas,alpha:!0});renderer.shadowMap.enabled=!0,renderer.shadowMap.type=THREE.PCFSoftShadowMap;const renderPass=new RenderPass(scene,camera),composer=new EffectComposer(renderer);let model;composer.addPass(renderPass),renderer.setSize(sizes.width,sizes.height),renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),camera.lookAt(0,.5,0);const fbxLoader=new FBXLoader;fbxLoader.load("./models/hardsuit.fbx",(e=>{e.scale.set(.007,.007,.007),e.name="hardsuit",scene.add(e),model=e}),(e=>{console.log(e.loaded/e.total*100+"% loaded")}),(e=>{}));const geometry=new THREE.IcosahedronGeometry(.7),material=new THREE.MeshLambertMaterial({color:16777215}),light=new THREE.SpotLight(16777215,1);light.position.x=1.3,light.position.z=1,scene.add(light),scene.fog=new THREE.FogExp2("#1a2b31",.9);const clock=new THREE.Clock;var timeOfLastFrame=0;const tick=()=>{const e=clock.getElapsedTime();animating&&model&&model.rotateY(scrollPercent/5e3),composer.render(scene,camera),window.requestAnimationFrame(tick),timeOfLastFrame=e};tick();